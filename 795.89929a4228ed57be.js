"use strict";(self.webpackChunkTerraForm=self.webpackChunkTerraForm||[]).push([[795],{8795:(se,h,l)=>{l.r(h),l.d(h,{StudentsModule:()=>re});var m=l(817),u=l(6153),S=l(7964),g=l.n(S),e=l(3333),v=l(8029),A=l(5391),f=l(2306);let w=(()=>{class a{constructor(t,o,n){this._service=t,this.router=o,this.route=n,this.Students=[],this.showLoader=!0,this.metrics={actives:{total:0},girls:{total:0},mens:{total:0},Birthdate:{total:0}}}ngOnInit(){this.getList()}getList(){this.showLoader=!0,this._service.getStudents().subscribe(t=>{this.Students=t,this.showLoader=!1}),this.loadAnalytics()}loadAnalytics(){this.showLoader=!0,this._service.getAnalytics().subscribe(t=>{this.metrics=t,this.showLoader=!1})}deleteStudent(t){g().fire({title:"Cuidado",text:"\xbfDesea eliminar el registro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!",cancelButtonText:"Cancelar"}).then(o=>{this.showLoader=!0,o.isConfirmed?this._service.delStudent({uuid:t.uuid}).subscribe(n=>{this.showLoader=!1,this.getList()}):this.showLoader=!1})}goToAdd(){this.router.navigate(["admin/students/new"])}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(v.V),e.Y36(u.F0),e.Y36(u.gz))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-students-list"]],decls:67,vars:7,consts:[[1,"row","page-titles","mx-0"],[1,"col-sm-6","p-md-0"],[1,"welcome-text"],[1,"mb-1"],[1,"col-sm-6","p-md-0","justify-content-sm-end","mt-2","mt-sm-0","d-flex"],["type","button",1,"btn","btn-primary","btn-sl-sm","mr-3",3,"click"],[1,"mr-2"],[1,"fa","fa-plus"],[1,"row"],[1,"col-lg-3","col-sm-6"],[1,"card"],[1,"stat-widget-two","card-body"],[1,"stat-content"],[1,"stat-text"],[1,"stat-digit"],[1,"fa","fa-users"],[1,"progress"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-success","w-100"],[1,"fa","fa-female"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-primary","w-100"],[1,"fa","fa-male"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-warning","w-100"],[1,"fa","fa-birthday-cake"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-danger","w-100"],[1,"col-12"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[2,"width","100%","height","100%"],[3,"rowData","idTable","deleteRow"],[3,"showLoader"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4,"Estudiantes"),e.qZA(),e.TgZ(5,"p",3),e._uU(6,"Estudiantes activos"),e.qZA()()(),e.TgZ(7,"div",4)(8,"button",5),e.NdJ("click",function(){return o.goToAdd()}),e.TgZ(9,"span",6),e._UZ(10,"i",7),e.qZA(),e._uU(11," Nuevo registro"),e.qZA()()(),e.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13),e._uU(18,"Estudiantes Activos"),e.qZA(),e.TgZ(19,"div",14),e._UZ(20,"i",15),e._uU(21),e.qZA()(),e.TgZ(22,"div",16),e._UZ(23,"div",17),e.qZA()()()(),e.TgZ(24,"div",9)(25,"div",10)(26,"div",11)(27,"div",12)(28,"div",13),e._uU(29,"Femeninos"),e.qZA(),e.TgZ(30,"div",14),e._UZ(31,"i",18),e._uU(32),e.qZA()(),e.TgZ(33,"div",16),e._UZ(34,"div",19),e.qZA()()()(),e.TgZ(35,"div",9)(36,"div",10)(37,"div",11)(38,"div",12)(39,"div",13),e._uU(40,"Masculinos"),e.qZA(),e.TgZ(41,"div",14),e._UZ(42,"i",20),e._uU(43),e.qZA()(),e.TgZ(44,"div",16),e._UZ(45,"div",21),e.qZA()()()(),e.TgZ(46,"div",9)(47,"div",10)(48,"div",11)(49,"div",12)(50,"div",13),e._uU(51,"Cumplea\xf1os este mes"),e.qZA(),e.TgZ(52,"div",14),e._UZ(53,"i",22),e._uU(54),e.qZA()(),e.TgZ(55,"div",16),e._UZ(56,"div",23),e.qZA()()()()(),e.TgZ(57,"div",8)(58,"div",24)(59,"div",10)(60,"div",25)(61,"h4",26),e._uU(62,"Lista"),e.qZA()(),e.TgZ(63,"div",27)(64,"div",28)(65,"app-table-terra",29),e.NdJ("deleteRow",function(s){return o.deleteStudent(s)}),e.qZA()()()()()(),e._UZ(66,"app-loader",30)),2&t&&(e.xp6(21),e.Oqu(o.metrics.actives.total),e.xp6(11),e.Oqu(o.metrics.girls.total),e.xp6(11),e.hij(" ",o.metrics.mens.total,""),e.xp6(11),e.Oqu(o.metrics.Birthdate.total),e.xp6(11),e.Q6J("rowData",o.Students)("idTable",1),e.xp6(1),e.Q6J("showLoader",o.showLoader))},dependencies:[A.x,f.R],styles:[".ag-theme-quartz[_ngcontent-%COMP%]{--ag-grid-size: 120px !important;--ag-list-item-height: 100px !important}"]}),a})();var p=l(7036),r=l(8765),_=l(3183),b=l(5556),U=l(770),y=l(8617),x=l(7272),q=l(9235);function I(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleModal())}),e.TgZ(1,"label",4),e._uU(2,"Tomar foto"),e.qZA()()}}function N(a,i){if(1&a&&(e.TgZ(0,"h4")(1,"span"),e._uU(2),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(t.errorMessage)}}function M(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.triggerSnapshot())}),e._uU(1,"Capturar Imagen"),e.qZA()}}function L(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h5",9),e._uU(5,"Tomar Foto"),e.qZA(),e.TgZ(6,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleModal())}),e.TgZ(7,"span"),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",11)(10,"webcam",12),e.NdJ("imageCapture",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.handleImage(n))})("initError",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.handleInitError(n))}),e.qZA(),e.YNc(11,N,3,1,"h4",13),e.qZA(),e.TgZ(12,"div",14)(13,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleModal())}),e._uU(14,"Cerrar"),e.qZA(),e.YNc(15,M,2,0,"button",16),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(10),e.Q6J("width",450)("trigger",t.triggerObservable),e.xp6(1),e.Q6J("ngIf",t.errorDevice),e.xp6(4),e.Q6J("ngIf",!t.errorDevice)}}function F(a,i){1&a&&e._UZ(0,"div",18)}let J=(()=>{class a{constructor(){this.imgReady=new e.vpe,this.showModal=!1,this.trigger=new q.x,this.webcamImage=null,this.errorMessage="",this.errorDevice=!1,navigator.mediaDevices.getUserMedia({video:!0}).then(t=>{}).catch(t=>{console.error("Error al obtener permisos:",t),this.errorDevice=!0})}ngOnInit(){}toggleModal(){this.showModal=!this.showModal}get triggerObservable(){return this.trigger.asObservable()}triggerSnapshot(){this.trigger.next()}handleImage(t){console.log(t),this.webcamImage=t,this.imgReady.emit(t),this.toggleModal()}handleInitError(t){if(t.mediaStreamError&&"NotAllowedError"===t.mediaStreamError.name){alert("Error al acceder a la camara acceso denegado"),this.errorMessage=" Error al acceder a la camara",this.errorDevice=!0;try{navigator.mediaDevices.getUserMedia({video:!0})}catch(o){console.error("Error al solicitar permisos de la c\xe1mara:",o)}}}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-webcam-modal"]],outputs:{imgReady:"imgReady"},decls:3,vars:3,consts:[["class","btn btn-primary btn-rounded",3,"click",4,"ngIf"],["class","modal fade show","id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true","style","padding-right: 15px; display: block;",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],[1,"btn","btn-primary","btn-rounded",3,"click"],[1,"form-label","text-white","m-1"],["id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","show",2,"padding-right","15px","display","block"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"click"],[1,"modal-body"],[1,"rounded-circle",3,"width","trigger","imageCapture","initError"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"modal-backdrop","fade","show"]],template:function(t,o){1&t&&(e.YNc(0,I,3,0,"div",0),e.YNc(1,L,16,4,"div",1),e.YNc(2,F,1,0,"div",2)),2&t&&(e.Q6J("ngIf",!o.errorDevice),e.xp6(1),e.Q6J("ngIf",o.showModal),e.xp6(1),e.Q6J("ngIf",o.showModal))},dependencies:[m.O5,_.i3]}),a})();var Z=l(824);const D=["capture"];function R(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",78),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteStudent())}),e.TgZ(1,"span",79),e._UZ(2,"i",80),e.qZA(),e._uU(3," Eliminar"),e.qZA()}}function k(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleModal())}),e.TgZ(1,"span",79),e._UZ(2,"i",81),e.qZA(),e._uU(3," Inscribir curso"),e.qZA()}}function B(a,i){1&a&&(e.TgZ(0,"td")(1,"span",83),e._uU(2,"Activo"),e.qZA()())}function O(a,i){1&a&&(e.TgZ(0,"td")(1,"span",84),e._uU(2,"Inactivo"),e.qZA()())}function Q(a,i){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span"),e._uU(7),e.qZA()(),e.YNc(8,B,3,0,"td",82),e.YNc(9,O,3,0,"td",82),e.qZA()),2&a){const t=i.$implicit,o=i.index;e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(t.Name),e.xp6(3),e.Oqu(t.Amount),e.xp6(1),e.Q6J("ngIf",1==t.Status),e.xp6(1),e.Q6J("ngIf",2==t.Status)}}function P(a,i){1&a&&(e.TgZ(0,"span"),e._UZ(1,"i",94),e.qZA())}function E(a,i){1&a&&(e.TgZ(0,"span"),e._UZ(1,"i",95),e.qZA())}function Y(a,i){1&a&&(e.TgZ(0,"h4",96),e._uU(1,"Mensualidad"),e.qZA())}function G(a,i){1&a&&(e.TgZ(0,"h4",97),e._uU(1,"Otros pagos"),e.qZA())}function H(a,i){if(1&a&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.Name)}}function V(a,i){if(1&a&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.Description)}}function j(a,i){1&a&&(e.TgZ(0,"span",84),e._uU(1,"Pendiente"),e.qZA())}function W(a,i){1&a&&(e.TgZ(0,"span",98),e._uU(1,"Abonado"),e.qZA())}function K(a,i){1&a&&(e.TgZ(0,"span",83),e._uU(1,"completado"),e.qZA())}function z(a,i){if(1&a&&(e.TgZ(0,"div",85)(1,"div",86),e.YNc(2,P,2,0,"span",82),e.YNc(3,E,2,0,"span",82),e.qZA(),e.TgZ(4,"div",87),e.YNc(5,Y,2,0,"h4",88),e.YNc(6,G,2,0,"h4",89),e.YNc(7,H,2,1,"p",82),e.YNc(8,V,2,1,"p",82),e.TgZ(9,"p",90),e._uU(10),e.qZA(),e.YNc(11,j,2,0,"span",91),e.YNc(12,W,2,0,"span",92),e.YNc(13,K,2,0,"span",93),e.qZA()()),2&a){const t=i.$implicit;e.xp6(2),e.Q6J("ngIf",1==t.PaymentType),e.xp6(1),e.Q6J("ngIf",2==t.PaymentType),e.xp6(2),e.Q6J("ngIf",1==t.PaymentType),e.xp6(1),e.Q6J("ngIf",2==t.PaymentType),e.xp6(1),e.Q6J("ngIf",1==t.PaymentType),e.xp6(1),e.Q6J("ngIf",2==t.PaymentType),e.xp6(2),e.Oqu(t.PaymentDate),e.xp6(1),e.Q6J("ngIf",1==t.Status),e.xp6(1),e.Q6J("ngIf",2==t.Status),e.xp6(1),e.Q6J("ngIf",3==t.Status)}}function $(a,i){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&a){const t=i.$implicit;e.Jzz("text-align: center; ",3==t.Status?"background-color: #7ED321;":2==t.Status?"background-color: #d32121;":"background-color: #f2f2f2;",""),e.xp6(1),e.Oqu(t.Amount)}}function X(a,i){if(1&a&&(e.TgZ(0,"option",113),e._uU(1),e.qZA()),2&a){const t=i.$implicit;e.Q6J("value",t.UUID),e.xp6(1),e.Oqu(t.Name)}}function ee(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",69),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.registreLevel())}),e._uU(1,"Registrar"),e.qZA()}}function te(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",99)(1,"div",100)(2,"div",101)(3,"div",102)(4,"h5",103),e._uU(5,"Inscribir Curso"),e.qZA(),e.TgZ(6,"button",104),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleModal())}),e.TgZ(7,"span"),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",105)(10,"form",7)(11,"div",51)(12,"label",106),e._uU(13,"Curso"),e.qZA(),e.TgZ(14,"select",107),e.NdJ("change",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.selectLevel(n))}),e.TgZ(15,"option",108),e._uU(16,"Elegir..."),e.qZA(),e.YNc(17,X,2,2,"option",109),e.qZA()()()(),e.TgZ(18,"div",110)(19,"button",111),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleModal())}),e._uU(20,"Cerrar"),e.qZA(),e.YNc(21,ee,2,0,"button",112),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(10),e.Q6J("formGroup",t.formLevel),e.xp6(7),e.Q6J("ngForOf",t.levelSelect),e.xp6(4),e.Q6J("ngIf",!t.errorDevice)}}function oe(a,i){1&a&&e._UZ(0,"div",114)}let T=(()=>{class a{constructor(t,o,n,s,c,d){this._service=t,this.__levelServ=o,this.router=n,this.route=s,this.alert=c,this.auth=d,this.formHasBeenSave=!1,this.hasnewimage=!1,this.showLoader=!0,this.disableForm=!1,this.uuid=null,this.viewType="add",this.btnlabel="Agregar",this.base64Data="",this.levelsByStudent=[],this.paymentsByStudents=[],this.selectedFile=null,this.imagePreview="https://mdbootstrap.com/img/Photos/Others/placeholder-avatar.jpg",this.months=[{IdMonth:1,Amount:"",Status:1},{IdMonth:2,Amount:"",Status:1},{IdMonth:3,Amount:"",Status:1},{IdMonth:4,Amount:"",Status:1},{IdMonth:5,Amount:"",Status:1},{IdMonth:6,Amount:"",Status:1},{IdMonth:7,Amount:"",Status:1},{IdMonth:8,Amount:"",Status:1},{IdMonth:9,Amount:"",Status:1},{IdMonth:10,Amount:"",Status:1},{IdMonth:11,Amount:"",Status:1},{IdMonth:12,Amount:"",Status:1}],this.levelSelect=[],this.LevelSelectAux=[],this.selecteLevelUUID=null,this.showModal=!1,this.createForm(),this.subscribeChangeForm()}ngOnInit(){console.log(window.location.origin),this.showLoader=!0,this.route.params.subscribe(t=>{this.uuid=t.uuid,void 0!==this.uuid?(this.showLoader=!1,this.viewType="edit",this.loadStudent(),this.btnlabel="Guardar",this.qrData=b.N.verification+this.auth.getUser().company+"/"+this.uuid):this.showLoader=!1,this.loadSelects()})}ngOnDestroy(){}subscribeChangeForm(){this.formStudent.valueChanges.subscribe(t=>{this.formStudent.pristine||(this.formHasBeenSave=!1)})}loadStudent(){this.showLoader=!0,this._service.getStudentsByUuid(this.uuid).subscribe(t=>{console.log(t);let o=t;this.setFormStudent(o.student),this.levelsByStudent=o.levels,this.paymentsByStudents=o.payments,this.checkMonthPayment(),this.showLoader=!1})}loadSelects(){this.showLoader=!0,this._service.getResources().subscribe(t=>{console.log(t),this.LevelSelectAux=t,this.filterLevelsRegistred(),this.showLoader=!1})}filterLevelsRegistred(){this.levelSelect=this.LevelSelectAux.filter(t=>!this.levelsByStudent.some(o=>o.UUID===t.UUID))}selectLevel(t){this.selecteLevelUUID=t.target.value}registreLevel(){this.showLoader=!0,this.__levelServ.registrationStudent({student:this.uuid,level:this.selecteLevelUUID,getLevelsByStudents:!0}).subscribe(t=>{this.alert.success("Inscripcion","la inscripcion fue exitosa"),this.levelsByStudent=t,this.filterLevelsRegistred(),this.toggleModal(),this.showLoader=!1})}setFormStudent(t){this.formStudent.get("Name").patchValue(t.Name),this.formStudent.get("CI").patchValue(t.CI),this.formStudent.get("Birthdate").patchValue(t.Birthdate),this.formStudent.get("LegalRepresentative").patchValue(t.LegalRepresentative),this.formStudent.get("PhoneNumber").patchValue(t.PhoneNumber),this.formStudent.get("PhoneNumberLegalRepresentative").patchValue(t.PhoneNumberLegalRepresentative),this.formStudent.get("Image").patchValue(t.Image),""!=t.Image&&(this.imagePreview=b.N.routerImg+t.Image),this.formStudent.get("Direction").patchValue(t.Direction),this.formStudent.get("Observation").patchValue(t.Observation),this.formStudent.get("Gender").patchValue(t.Gender),this.formStudent.get("Company").patchValue(t.Company),this.formStudent.get("Status").patchValue(t.Status),this.formStudent.get("UUID").patchValue(t.UUID)}createForm(){this.formStudent=new r.cw({Name:new r.NI("",[r.kI.required]),CI:new r.NI(""),Birthdate:new r.NI("",[r.kI.required]),LegalRepresentative:new r.NI(""),PhoneNumber:new r.NI(""),PhoneNumberLegalRepresentative:new r.NI(""),Image:new r.NI(""),Direction:new r.NI(""),Observation:new r.NI(""),Gender:new r.NI("",[r.kI.required]),Company:new r.NI(""),Status:new r.NI(1),UUID:new r.NI(""),base64Data:new r.NI(null)}),this.formLevel=new r.cw({UUID:new r.NI("")})}sendForm(){var t=this;return(0,p.Z)(function*(){if(t.formHasBeenSave=!0,t.disableForm=!0,t.formStudent.valid){t.showLoader=!0;let o=t.formStudent.value;"add"==t.viewType?t._service.addStudent({student:o,hasnewimage:t.hasnewimage}).subscribe(function(){var n=(0,p.Z)(function*(s){t.alert.success("Registro Creado","Se ha creado el registro"),t.showLoader=!1,t.goBack()});return function(s){return n.apply(this,arguments)}}(),n=>{console.log(n),t.disableForm=!1,t.showLoader=!1}):(t.alert.success("Registro Actualizado","Se ha actualizado el registro"),t._service.updStudent({student:o,hasnewimage:t.hasnewimage}).subscribe(function(){var n=(0,p.Z)(function*(s){console.log(s),t.showLoader=!1});return function(s){return n.apply(this,arguments)}}(),n=>{console.log(n),t.disableForm=!1,t.showLoader=!1}))}else t.showLoader=!1,t.alert.warning("Campos invalidos","Verifique los campos marcados")})()}deleteStudent(){g().fire({title:"Cuidado",text:"\xbfDesea eliminar el registro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!",cancelButtonText:"Cancelar"}).then(t=>{console.log(t),t.isConfirmed&&this._service.delStudent({uuid:this.uuid}).subscribe(o=>{this.goBack()})})}goBack(){(this.formStudent.dirty||this.hasnewimage)&&!this.formHasBeenSave&&g().fire({title:"Cambios sin guardar",text:"Algunos cambios no fueron guardados, \xbfDeseas Guardarlos?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Guardar!",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&this.sendForm()}),this.router.navigate(["admin/students"])}onFileSelected(t){if(console.log(t),t instanceof _.T8)this.imagePreview=t.imageAsDataUrl,this.base64Data=t.imageAsDataUrl,this.formStudent.get("base64Data").patchValue(this.base64Data);else{this.selectedFile=t.target.files[0];const o=new FileReader;o.onload=n=>{this.base64Data=o.result,this.imagePreview=o.result,this.formStudent.get("base64Data").patchValue(this.base64Data)},o.readAsDataURL(this.selectedFile)}this.hasnewimage=!0}validatorOfInput(t){let s,o=this.formStudent.get(t);if(!(o.touched&&o.invalid||this.formHasBeenSave&&o.invalid))return"";if(o.errors.required)return s="Campo Requerido.",s;if(o.errors.pattern)return s="El formato no es valido",s;if(o.errors.minlength)return s=`Debe contener al menos ${o.errors.minlength.requiredLength} caracteres`,s;if(o.errors.maxlength){let d=o.value.substring(0,o.value.length-1);o.patchValue(d)}}toggleModal(){this.showModal=!this.showModal}checkMonthPayment(){let t=this.paymentsByStudents.filter(o=>1==o.PaymentType);this.months.forEach(o=>{const n=t.find(s=>s.IdMonth==o.IdMonth);n&&(o.Amount=n.Amount,o.Status=n.Status)})}shareQR(){console.log("llego"),console.log(this.capture),html2canvas(this.capture.nativeElement).then(t=>{if(console.log("html2canvas"),this.capturedImage=t.toDataURL(),console.log("capturedImage"),console.log("canvas.toDataURL() --\x3e"+this.capturedImage),navigator.share){let o=this.dataURLtoFile(this.capturedImage,"QrTerraForm.jpg");navigator.share({title:"Awesome Content",text:"Check out this awesome content!",url:"https://example.com",files:[o]}).then(()=>console.log("Shared successfully")).catch(n=>console.error("Sharing failed:",n))}})}dataURLtoFile(t,o){for(var n=t.split(","),s=n[0].match(/:(.*?);/)[1],c=atob(n[n.length-1]),d=c.length,C=new Uint8Array(d);d--;)C[d]=c.charCodeAt(d);return new File([C],o,{type:s})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(v.V),e.Y36(U.r),e.Y36(u.F0),e.Y36(u.gz),e.Y36(y.c),e.Y36(x.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-students-crud"]],viewQuery:function(t,o){if(1&t&&e.Gf(D,7),2&t){let n;e.iGM(n=e.CRH())&&(o.capture=n.first)}},decls:205,vars:30,consts:[[1,"row","page-titles","mx-0"],[1,"col-sm-6","p-md-0"],[1,"welcome-text"],[1,"mb-1"],[1,"col-sm-6","p-md-0","justify-content-sm-end","mt-2","mt-sm-0","d-flex"],["class","btn btn-danger btn-sl-sm mr-3","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],[1,"form-valide",3,"formGroup"],[1,"row"],[1,"col-lg-4"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"d-flex","justify-content-center","mb-4"],["id","selectedAvatar","alt","example placeholder",1,"rounded-circle",2,"width","20vw","height","20vw","min-width","200px","min-height","200px","object-fit","cover",3,"src"],[1,"d-flex","justify-content-center"],[1,"btn","btn-primary","btn-rounded"],["for","customFile2",1,"form-label","text-white","m-1"],["type","file","id","customFile2",1,"form-control","d-none",3,"change"],[3,"imgReady"],["class","btn btn-primary btn-sl-sm mr-3","type","button",3,"click",4,"ngIf"],[1,"table-responsive"],[1,"table","mb-0"],[4,"ngFor","ngForOf"],[1,"card-body",2,"height","55vh","overflow-x","scroll"],[1,"recent-comment","m-t-15"],["class","media",4,"ngFor","ngForOf"],[1,"card",3,"hidden"],[1,"qrcodeImage","d-flex","justify-content-center"],["capture",""],[3,"qrdata","allowEmptyString","ariaLabel","colorDark","colorLight","elementType","errorCorrectionLevel","imageSrc","imageHeight","imageWidth","margin","scale","title","width"],["type","button",1,"btn","btn-primary","btn-sl-sm","mr-3",3,"click"],[1,"col-lg-8"],[1,"form-validation"],[1,"col-sm-12","col-lg-6","col-md-6"],[1,"form-group"],["for","Name"],[1,"text-danger"],["type","text","id","Name","name","Name","formControlName","Name","placeholder","Ingresa Nombre",1,"form-control"],[1,"invalid-feedback"],["for","CI"],["type","text","id","CI","name","CI","formControlName","CI","placeholder","CI..",1,"form-control"],["for","Birthdate"],["type","date","id","Birthdate","name","Birthdate","placeholder"," dd/mm/yyyy","formControlName","Birthdate",1,"form-control"],["for","Gender"],["id","Gender","name","Gender","formControlName","Gender",1,"form-control"],["value",""],["value","Masculino"],["value","Femenino"],[1,"mb-4"],[1,"mb-3"],[1,"col"],["for","PhoneNumber"],["type","text","id","PhoneNumber","name","PhoneNumber","formControlName","PhoneNumber","placeholder","..telefono!",1,"form-control"],["for","LegalRepresentative"],["type","LegalRepresentative","id","LegalRepresentative","name","LegalRepresentative","formControlName","LegalRepresentative","placeholder","Representante.",1,"form-control"],["for","PhoneNumberLegalRepresentative"],["type","PhoneNumberLegalRepresentative","id","PhoneNumberLegalRepresentative","name","PhoneNumberLegalRepresentative","formControlName","PhoneNumberLegalRepresentative","placeholder"," Telefono Representante.",1,"form-control"],["for","Direction"],["type","text","id","Direction","name","Direction","placeholder"," calle casa etc","formControlName","Direction",1,"form-control"],[1,"col-sm-12","col-lg-12","col-md-12mb-3"],["rows","5","placeholder","Observaciones","formControlName","Observation",1,"form-control"],["for","Status"],["id","Status","name","Status","formControlName","Status",1,"form-control"],["value","1"],["value","2"],[1,"form-group","row"],[1,"col","d-flex","justify-content-end"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card-body",2,"overflow","scroll"],[1,"table","table-striped","table-hover"],[1,"thead-dark"],[2,"text-align","center"],[3,"style",4,"ngFor","ngForOf"],["class","modal fade show","id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true","style","padding-right: 15px; display: block;",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],[3,"showLoader"],["type","button",1,"btn","btn-danger","btn-sl-sm","mr-3",3,"click"],[1,"mr-2"],[1,"fa","fa-trash"],[1,"fa","fa-check"],[4,"ngIf"],[1,"badge","badge-success"],[1,"badge","badge-warning"],[1,"media"],[1,"media-left"],[1,"media-body"],["class","media-heading text-primary",4,"ngIf"],["class","media-heading text-success",4,"ngIf"],[1,"comment-date"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[1,"fa","fa-calendar"],[1,"fa","fa-money"],[1,"media-heading","text-primary"],[1,"media-heading","text-success"],[1,"badge","badge-danger"],["id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","show",2,"padding-right","15px","display","block"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"click"],[1,"modal-body"],["for","Student"],["id","Student","required","","formControlName","UUID",1,"custom-select","d-block","w-100",3,"change"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[3,"value"],[1,"modal-backdrop","fade","show"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4,"Estudiantes"),e.qZA(),e.TgZ(5,"p",3),e._uU(6,"nuevo registro"),e.qZA()()(),e.TgZ(7,"div",4),e.YNc(8,R,4,0,"button",5),e.TgZ(9,"button",6),e.NdJ("click",function(){return o.goBack()}),e._uU(10),e.qZA()()(),e.TgZ(11,"form",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"h4",12),e._uU(17,"Foto"),e.qZA()(),e.TgZ(18,"div",13)(19,"div")(20,"div",14),e._UZ(21,"img",15),e.qZA(),e.TgZ(22,"div",16)(23,"div",17)(24,"label",18),e._uU(25,"cargar archivo"),e.qZA(),e.TgZ(26,"input",19),e.NdJ("change",function(s){return o.onFileSelected(s)}),e.qZA()(),e.TgZ(27,"app-webcam-modal",20),e.NdJ("imgReady",function(s){return o.onFileSelected(s)}),e.qZA()()()()(),e.TgZ(28,"div",10)(29,"div",11)(30,"h4",12),e._uU(31,"Cursos Inscritos"),e.qZA(),e.YNc(32,k,4,0,"button",21),e.qZA(),e.TgZ(33,"div",13)(34,"div",22)(35,"table",23)(36,"thead")(37,"tr")(38,"th"),e._uU(39,"#"),e.qZA(),e.TgZ(40,"th"),e._uU(41,"Nombre"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"Costo"),e.qZA(),e.TgZ(44,"th"),e._uU(45,"Estatus"),e.qZA()()(),e.TgZ(46,"tbody"),e.YNc(47,Q,10,5,"tr",24),e.qZA()()()()(),e.TgZ(48,"div",10)(49,"div",11)(50,"h4",12),e._uU(51,"Pagos Realizados"),e.qZA()(),e.TgZ(52,"div",25)(53,"div",26),e.YNc(54,z,14,10,"div",27),e.qZA()()(),e.TgZ(55,"div",28)(56,"div",11),e._uU(57," QR Informacion "),e.qZA(),e.TgZ(58,"div",13)(59,"div",29,30),e._UZ(61,"qrcode",31),e.qZA(),e.TgZ(62,"button",32),e.NdJ("click",function(){return o.shareQR()}),e._uU(63,"compartir"),e.qZA()()()(),e.TgZ(64,"div",33)(65,"div",10)(66,"div",11)(67,"h4",12),e._uU(68,"Informacion Personal"),e.qZA()(),e.TgZ(69,"div",13)(70,"div",34)(71,"div",8)(72,"div",35)(73,"div",36)(74,"label",37),e._uU(75,"Nombre "),e.TgZ(76,"span",38),e._uU(77,"*"),e.qZA()(),e._UZ(78,"input",39),e.TgZ(79,"div",40),e._uU(80),e.qZA()()(),e.TgZ(81,"div",35)(82,"div",36)(83,"label",41),e._uU(84,"CI "),e.qZA(),e._UZ(85,"input",42),e.qZA()()(),e.TgZ(86,"div",8)(87,"div",35)(88,"div",36)(89,"label",43),e._uU(90,"Fecha de Nacimiento "),e.TgZ(91,"span",38),e._uU(92,"*"),e.qZA()(),e._UZ(93,"input",44),e.TgZ(94,"div",40),e._uU(95),e.qZA()()(),e.TgZ(96,"div",35)(97,"div",36)(98,"label",45),e._uU(99,"Genero "),e.TgZ(100,"span",38),e._uU(101,"*"),e.qZA()(),e.TgZ(102,"select",46)(103,"option",47),e._uU(104,"Please select"),e.qZA(),e.TgZ(105,"option",48),e._uU(106,"Masculino"),e.qZA(),e.TgZ(107,"option",49),e._uU(108,"Femenino"),e.qZA()(),e.TgZ(109,"div",40),e._uU(110),e.qZA()()()(),e._UZ(111,"hr",50),e.TgZ(112,"h4",51),e._uU(113,"Informacion de Contacto"),e.qZA(),e.TgZ(114,"div",8)(115,"div",52)(116,"div",36)(117,"label",53),e._uU(118,"Telefono "),e.qZA(),e._UZ(119,"input",54),e.qZA()()(),e._UZ(120,"hr",50),e.TgZ(121,"h4",51),e._uU(122,"Informacion de Representante"),e.qZA(),e.TgZ(123,"div",8)(124,"div",35)(125,"div",36)(126,"label",55),e._uU(127,"Representante Legal "),e.qZA(),e._UZ(128,"input",56),e.qZA()(),e.TgZ(129,"div",35)(130,"div",36)(131,"label",57),e._uU(132,"Telefono Representante Legal "),e.qZA(),e._UZ(133,"input",58),e.qZA()()(),e._UZ(134,"hr",50),e.TgZ(135,"h4",51),e._uU(136,"Otros Datos"),e.qZA(),e.TgZ(137,"div",8)(138,"div",52)(139,"div",36)(140,"label",59),e._uU(141,"Direci\xf3n "),e.qZA(),e._UZ(142,"input",60),e.qZA()()(),e.TgZ(143,"div",8)(144,"div",61)(145,"div",36)(146,"label"),e._uU(147,"Observaciones"),e.qZA(),e._UZ(148,"textarea",62),e.qZA()()(),e.TgZ(149,"div",8)(150,"div",52)(151,"div",36)(152,"label",63),e._uU(153,"Estado "),e.TgZ(154,"span",38),e._uU(155,"*"),e.qZA()(),e.TgZ(156,"select",64)(157,"option",47),e._uU(158,"Please select"),e.qZA(),e.TgZ(159,"option",65),e._uU(160,"Activo"),e.qZA(),e.TgZ(161,"option",66),e._uU(162,"inactivo"),e.qZA()()()()(),e.TgZ(163,"div",67)(164,"div",68)(165,"button",69),e.NdJ("click",function(){return o.sendForm()}),e._uU(166),e.qZA()()()()()(),e.TgZ(167,"div",10)(168,"div",11)(169,"h4",12),e._uU(170,"Relacion de Pagos Mensuales"),e.qZA()(),e.TgZ(171,"div",70)(172,"table",71)(173,"thead",72)(174,"tr")(175,"th",73),e._uU(176,"Ene"),e.qZA(),e.TgZ(177,"th",73),e._uU(178,"Feb"),e.qZA(),e.TgZ(179,"th",73),e._uU(180,"Mar"),e.qZA(),e.TgZ(181,"th",73),e._uU(182,"Abr"),e.qZA(),e.TgZ(183,"th",73),e._uU(184,"May"),e.qZA(),e.TgZ(185,"th",73),e._uU(186,"Jun"),e.qZA(),e.TgZ(187,"th",73),e._uU(188,"Jul"),e.qZA(),e.TgZ(189,"th",73),e._uU(190,"Ago"),e.qZA(),e.TgZ(191,"th",73),e._uU(192,"Sep"),e.qZA(),e.TgZ(193,"th",73),e._uU(194,"Oct"),e.qZA(),e.TgZ(195,"th",73),e._uU(196,"Nov"),e.qZA(),e.TgZ(197,"th",73),e._uU(198,"Dic"),e.qZA()()(),e.TgZ(199,"tbody")(200,"tr"),e.YNc(201,$,2,4,"td",74),e.qZA()()()()()()()(),e.YNc(202,te,22,3,"div",75),e.YNc(203,oe,1,0,"div",76),e._UZ(204,"app-loader",77)),2&t&&(e.xp6(8),e.Q6J("ngIf","edit"==o.viewType),e.xp6(2),e.Oqu("salir"),e.xp6(1),e.Q6J("formGroup",o.formStudent),e.xp6(10),e.Q6J("src",o.imagePreview,e.LSH),e.xp6(11),e.Q6J("ngIf","edit"==o.viewType),e.xp6(15),e.Q6J("ngForOf",o.levelsByStudent),e.xp6(7),e.Q6J("ngForOf",o.paymentsByStudents),e.xp6(1),e.Q6J("hidden",!o.qrData),e.xp6(6),e.Q6J("qrdata",o.qrData)("allowEmptyString",!0)("ariaLabel","QR Code image with the following content...")("colorDark","#3f51b5")("colorLight","#000000")("elementType","canvas")("errorCorrectionLevel","M")("imageSrc","assets/images/logo cuadrado.png")("imageHeight",90)("imageWidth",90)("margin",4)("scale",1)("title",o.qrData)("width",300),e.xp6(19),e.hij(" ",o.validatorOfInput("Name")," "),e.xp6(15),e.hij(" ",o.validatorOfInput("Birthdate")," "),e.xp6(15),e.hij(" ",o.validatorOfInput("Gender")," "),e.xp6(56),e.Oqu(o.btnlabel),e.xp6(35),e.Q6J("ngForOf",o.months),e.xp6(1),e.Q6J("ngIf",o.showModal),e.xp6(1),e.Q6J("ngIf",o.showModal),e.xp6(1),e.Q6J("showLoader",o.showLoader))},dependencies:[m.sg,m.O5,f.R,J,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.Q7,r.sg,r.u,Z.V]}),a})();const ae=[{path:"",component:w},{path:"new",component:T},{path:"update/:uuid",component:T}];let ne=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.Bz.forChild(ae),u.Bz]}),a})();var ie=l(2795);let re=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.ez,ie.m,ne,r.UX,Z.N]}),a})()}}]);