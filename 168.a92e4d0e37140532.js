"use strict";(self.webpackChunkTerraForm=self.webpackChunkTerraForm||[]).push([[168],{1168:(B,m,n)=>{n.r(m),n.d(m,{ProductsModule:()=>U});var h=n(817),d=n(6603),l=n(7036),s=n(8765),g=n(7964),p=n.n(g),t=n(3333),b=n(162),c=n(5556);let f=(()=>{class r extends b.U{getProducts(){return this.prepareTokenHeader(),this.http.get(c.N.routerBase+"/Products/list",{headers:this.headers})}addProduct(e){return this.prepareTokenHeader(),this.http.post(c.N.routerBase+"/Products/new",e,{headers:this.headers})}getProductByUuid(e){return this.prepareTokenHeader(),this.http.get(c.N.routerBase+"/Products/get/"+e,{headers:this.headers})}updProduct(e){return this.prepareTokenHeader(),this.http.post(c.N.routerBase+"/Products/upd",e,{headers:this.headers})}delProduct(e){return this.prepareTokenHeader(),this.http.post(c.N.routerBase+"/Products/delete",e,{headers:this.headers})}}return r.\u0275fac=function(){let u;return function(o){return(u||(u=t.n5z(r)))(o||r)}}(),r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var P=n(8617);function Z(r,u){if(1&r){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.deleteProduct())}),t.TgZ(1,"span",38),t._UZ(2,"i",39),t.qZA(),t._uU(3," Eliminar"),t.qZA()}}let v=(()=>{class r{constructor(e,o,i,a){this._service=e,this.router=o,this.route=i,this.alert=a,this.formHasBeenSave=!1,this.hasnewimage=!1,this.showLoader=!0,this.disableForm=!1,this.uuid=null,this.viewType="add",this.btnlabel="Agregar",this.createForm(),this.subscribeChangeForm()}ngOnInit(){this.showLoader=!0,this.route.params.subscribe(e=>{this.uuid=e.uuid,void 0!==this.uuid?(this.showLoader=!1,this.viewType="edit",this.loadProduct(),this.btnlabel="Guardar"):this.showLoader=!1})}subscribeChangeForm(){this.formProduct.valueChanges.subscribe(e=>{this.formProduct.pristine||(this.formHasBeenSave=!1)})}loadProduct(){this.showLoader=!0,this._service.getProductByUuid(this.uuid).subscribe(e=>{console.log(e),this.setFormProduct(e),this.showLoader=!1})}setFormProduct(e){this.formProduct.get("Name").patchValue(e.Name),this.formProduct.get("Amount").patchValue(e.Amount),this.formProduct.get("Observation").patchValue(e.Observation),this.formProduct.get("Description").patchValue(e.Description),this.formProduct.get("Status").patchValue(e.Status),this.formProduct.get("UUID").patchValue(e.UUID)}createForm(){this.formProduct=new s.cw({Name:new s.NI("",[s.kI.required]),Amount:new s.NI(0,[s.kI.required]),Observation:new s.NI(""),Description:new s.NI(""),Company:new s.NI(""),Status:new s.NI(1),UUID:new s.NI("")})}sendForm(){var e=this;return(0,l.Z)(function*(){if(e.formHasBeenSave=!0,e.disableForm=!0,e.formProduct.valid){e.showLoader=!0;let o=e.formProduct.value;"add"==e.viewType?e._service.addProduct({product:o}).subscribe(function(){var i=(0,l.Z)(function*(a){e.alert.success("Registro Creado","Se ha creado el registro"),e.showLoader=!1,e.goBack()});return function(a){return i.apply(this,arguments)}}(),i=>{console.log(i),e.disableForm=!1,e.showLoader=!1}):(e.alert.success("Registro Actualizado","Se ha actualizado el registro"),e._service.updProduct({product:o}).subscribe(function(){var i=(0,l.Z)(function*(a){console.log(a),e.showLoader=!1});return function(a){return i.apply(this,arguments)}}(),i=>{console.log(i),e.disableForm=!1,e.showLoader=!1}))}else e.showLoader=!1,e.alert.warning("Campos invalidos","Verifique los campos marcados")})()}deleteProduct(){p().fire({title:"Cuidado",text:"\xbfDesea eliminar el registro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!",cancelButtonText:"Cancelar"}).then(e=>{console.log(e),e.isConfirmed&&this._service.delProduct({uuid:this.uuid}).subscribe(o=>{this.goBack()})})}goBack(){this.router.navigate(["admin/products"])}validatorOfInput(e){let a,o=this.formProduct.get(e);if(!(o.touched&&o.invalid||this.formHasBeenSave&&o.invalid))return"";if(o.errors.required)return a="Campo Requerido.",a;if(o.errors.pattern)return a="El formato no es valido",a;if(o.errors.minlength)return a=`Debe contener al menos ${o.errors.minlength.requiredLength} caracteres`,a;if(o.errors.maxlength){let L=o.value.substring(0,o.value.length-1);o.patchValue(L)}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f),t.Y36(d.F0),t.Y36(d.gz),t.Y36(P.c))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-crud"]],decls:62,vars:4,consts:[[1,"row","page-titles","mx-0"],[1,"col-sm-6","p-md-0"],[1,"welcome-text"],[1,"mb-1"],[1,"col-sm-6","p-md-0","justify-content-sm-end","mt-2","mt-sm-0","d-flex"],["class","btn btn-danger btn-sl-sm mr-3","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],[1,"form-valide",3,"formGroup"],[1,"row"],[1,"col-12","col-lg-8"],[1,"card","mb-4"],[1,"card-header"],[1,"card-tile","mb-0"],[1,"card-body"],[1,"mb-3"],[1,"form-group"],["for","Name",1,"form-label"],["type","text","id","Name","placeholder","Nombre","formControlName","Name","name","Name","aria-label","Product title",1,"form-control"],[1,"row","mb-3"],[1,"col"],["for","Description",1,"form-label"],["type","text","id","Description","placeholder","Descripci\xf3n del producto","formControlName","Description","name","Description","aria-label","Description",1,"form-control"],["for","Observation"],["type","text","id","Observation","name","Observation","formControlName","Observation","placeholder","",1,"form-control"],[1,"form-group","row"],[1,"col","d-flex","justify-content-end"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-12","col-lg-4"],[1,"card-title","mb-0"],["for","amount",1,"form-label"],["type","text","id","amount","placeholder","$10","name","Amount","formControlName","Amount","aria-label","amount",1,"form-control"],["for","Status"],[1,"text-danger"],["id","Status","name","Status","formControlName","Status",1,"form-control"],["value",""],["value","1"],["value","2"],["type","button",1,"btn","btn-danger","btn-sl-sm","mr-3",3,"click"],[1,"mr-2"],[1,"fa","fa-trash"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),t._uU(4,"Productos"),t.qZA(),t.TgZ(5,"p",3),t._uU(6,"nuevo registro"),t.qZA()()(),t.TgZ(7,"div",4),t.YNc(8,Z,4,0,"button",5),t.TgZ(9,"button",6),t.NdJ("click",function(){return o.goBack()}),t._uU(10),t.qZA()()(),t.TgZ(11,"form",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"h5",12),t._uU(17,"Informaci\xf3n de Producto"),t.qZA()(),t.TgZ(18,"div",13)(19,"div",14)(20,"div",15)(21,"label",16),t._uU(22,"Nombre"),t.qZA(),t._UZ(23,"input",17),t.qZA()(),t.TgZ(24,"div",18)(25,"div",19)(26,"div",15)(27,"label",20),t._uU(28,"Descripci\xf3n"),t.qZA(),t._UZ(29,"input",21),t.qZA()()(),t.TgZ(30,"div",8)(31,"div",19)(32,"div",15)(33,"label",22),t._uU(34,"Observaciones "),t.qZA(),t._UZ(35,"input",23),t.qZA()()(),t.TgZ(36,"div",24)(37,"div",25)(38,"button",26),t.NdJ("click",function(){return o.sendForm()}),t._uU(39),t.qZA()()()()()(),t.TgZ(40,"div",27)(41,"div",10)(42,"div",11)(43,"h5",28),t._uU(44,"Precio"),t.qZA()(),t.TgZ(45,"div",13)(46,"div",15)(47,"label",29),t._uU(48,"Monto"),t.qZA(),t._UZ(49,"input",30),t.qZA(),t.TgZ(50,"div",15)(51,"label",31),t._uU(52,"Estado "),t.TgZ(53,"span",32),t._uU(54,"*"),t.qZA()(),t.TgZ(55,"select",33)(56,"option",34),t._uU(57,"Please select"),t.qZA(),t.TgZ(58,"option",35),t._uU(59,"Activo"),t.qZA(),t.TgZ(60,"option",36),t._uU(61,"inactivo"),t.qZA()()()()()()()()),2&e&&(t.xp6(8),t.Q6J("ngIf","edit"==o.viewType),t.xp6(2),t.Oqu("salir"),t.xp6(1),t.Q6J("formGroup",o.formProduct),t.xp6(28),t.Oqu(o.btnlabel))},dependencies:[h.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u]}),r})();var w=n(5391),C=n(2306);const T=[{path:"",component:(()=>{class r{constructor(e,o,i){this._service=e,this.router=o,this.route=i,this.Products=[],this.showLoader=!0,this.metrics={completed:0,electronic:0,cash:0,pending:0}}ngOnInit(){this.getList()}getList(){this.showLoader=!0,this._service.getProducts().subscribe(e=>{console.log(e),this.Products=e,this.showLoader=!1})}loadAnalytics(){}deleteProduct(e){p().fire({title:"Cuidado",text:"\xbfDesea eliminar el registro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!",cancelButtonText:"Cancelar"}).then(o=>{console.log(o),this.showLoader=!0,o.isConfirmed?this._service.delProduct({uuid:e.uuid}).subscribe(i=>{this.showLoader=!1,this.getList()}):this.showLoader=!1})}goToAdd(){this.router.navigate(["admin/products/new"])}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f),t.Y36(d.F0),t.Y36(d.gz))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-list"]],decls:19,vars:3,consts:[[1,"row","page-titles","mx-0"],[1,"col-sm-6","p-md-0"],[1,"welcome-text"],[1,"mb-1"],[1,"col-sm-6","p-md-0","justify-content-sm-end","mt-2","mt-sm-0","d-flex"],["type","button",1,"btn","btn-primary","btn-sl-sm","mr-3",3,"click"],[1,"mr-2"],[1,"fa","fa-plus"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[2,"width","100%","height","100%"],[3,"rowData","idTable","deleteRow"],[3,"showLoader"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),t._uU(4,"Productos"),t.qZA(),t.TgZ(5,"p",3),t._uU(6,"Produtos Registrados"),t.qZA()()(),t.TgZ(7,"div",4)(8,"button",5),t.NdJ("click",function(){return o.goToAdd()}),t.TgZ(9,"span",6),t._UZ(10,"i",7),t.qZA(),t._uU(11," Nuevo registro"),t.qZA()()(),t.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"app-table-terra",13),t.NdJ("deleteRow",function(a){return o.deleteProduct(a)}),t.qZA()()()()()(),t._UZ(18,"app-loader",14)),2&e&&(t.xp6(17),t.Q6J("rowData",o.Products)("idTable",3),t.xp6(1),t.Q6J("showLoader",o.showLoader))},dependencies:[w.x,C.R]}),r})()},{path:"new",component:v},{path:"update/:uuid",component:v}];let y=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[d.Bz.forChild(T),d.Bz]}),r})();var A=n(2795);let U=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[h.ez,y,A.m,s.UX]}),r})()}}]);