"use strict";(self.webpackChunkTerraForm=self.webpackChunkTerraForm||[]).push([[861],{5861:(y,m,i)=>{i.r(m),i.d(m,{UsersModule:()=>A});var h=i(817),d=i(6153),c=i(7036),r=i(8765),f=i(7964),v=i.n(f),e=i(3333),g=i(162),u=i(5556);let U=(()=>{class o extends g.U{getUsers(){return this.prepareTokenHeader(),this.http.get(u.N.routerBase+"/Users/list",{headers:this.headers})}addUser(t){return this.prepareTokenHeader(),this.http.post(u.N.routerBase+"/Users/new",t,{headers:this.headers})}getUserByUuid(t){return this.prepareTokenHeader(),this.http.get(u.N.routerBase+"/Users/get/"+t,{headers:this.headers})}updUser(t){return this.prepareTokenHeader(),this.http.post(u.N.routerBase+"/Users/upd",t,{headers:this.headers})}delUser(t){return this.prepareTokenHeader(),this.http.post(u.N.routerBase+"/Users/delete",t,{headers:this.headers})}}return o.\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(o)))(n||o)}}(),o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Z=i(8617);function b(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteUser())}),e.TgZ(1,"span",52),e._UZ(2,"i",53),e.qZA(),e._uU(3," Eliminar"),e.qZA()}}let p=(()=>{class o{constructor(t,n,a,l){this._service=t,this.router=n,this.route=a,this.alert=l,this.formHasBeenSave=!1,this.showLoader=!0,this.disableForm=!1,this.uuid=null,this.viewType="add",this.btnlabel="Agregar",this.createForm(),this.subscribeChangeForm()}ngOnInit(){this.showLoader=!0,this.route.params.subscribe(t=>{this.uuid=t.uuid,void 0!==this.uuid?(this.showLoader=!1,this.viewType="edit",this.loadStudent(),this.btnlabel="Guardar"):this.showLoader=!1})}loadStudent(){this.showLoader=!0,this._service.getUserByUuid(this.uuid).subscribe(t=>{console.log(t),this.setFormStudent(t),this.showLoader=!1})}subscribeChangeForm(){this.formUser.valueChanges.subscribe(t=>{this.formUser.pristine||(this.formHasBeenSave=!1)})}createForm(){this.formUser=new r.cw({Name:new r.NI("",[r.kI.required]),CI:new r.NI("",[r.kI.required]),Image:new r.NI(""),Observation:new r.NI(""),Status:new r.NI(1),UUID:new r.NI(""),Email:new r.NI("",[r.kI.required]),Password:new r.NI("",[r.kI.required])})}setFormStudent(t){this.formUser.get("Name").patchValue(t.Name),this.formUser.get("CI").patchValue(t.CI),this.formUser.get("Image").patchValue(t.Image),this.formUser.get("Observation").patchValue(t.Observation),this.formUser.get("Email").patchValue(t.Email),this.formUser.get("Status").patchValue(t.Status),this.formUser.get("UUID").patchValue(t.UUID),this.formUser.get("Password").patchValue(t.Password)}sendForm(){var t=this;return(0,c.Z)(function*(){if(t.showLoader=!0,t.formHasBeenSave=!0,t.disableForm=!0,t.formUser.valid){let n=t.formUser.value;console.log(t.viewType),"add"==t.viewType?t._service.addUser({student:n}).subscribe(function(){var a=(0,c.Z)(function*(l){t.alert.success("Registro Creado","Se ha creado el registro"),t.showLoader=!1});return function(l){return a.apply(this,arguments)}}(),a=>{console.log(a),t.disableForm=!1,t.showLoader=!1}):(t.alert.success("Registro Actualizado","Se ha actualizado el registro"),t._service.updUser({student:n}).subscribe(function(){var a=(0,c.Z)(function*(l){console.log(l),t.showLoader=!1});return function(l){return a.apply(this,arguments)}}(),a=>{console.log(a),t.disableForm=!1,t.showLoader=!1}))}else t.alert.warning("Campos invalidos","Verifique los campos marcados")})()}deleteUser(){v().fire({title:"Cuidado",text:"\xbfDesea eliminar el registro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!",cancelButtonText:"Cancelar"}).then(t=>{console.log(t),t.isConfirmed&&this._service.delUser({uuid:this.uuid}).subscribe(n=>{this.goBack()})})}goBack(){this.router.navigate(["admin/User"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(U),e.Y36(d.F0),e.Y36(d.gz),e.Y36(Z.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-users-crud"]],decls:121,vars:3,consts:[[1,"row","page-titles","mx-0"],[1,"col-sm-6","p-md-0"],[1,"welcome-text"],[1,"mb-1"],[1,"col-sm-6","p-md-0","justify-content-sm-end","mt-2","mt-sm-0","d-flex"],["class","btn btn-danger btn-sl-sm mr-3","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],[3,"formGroup"],[1,"row"],[1,"col-lg-4"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"d-flex","justify-content-center","mb-4"],["id","selectedAvatar","src","https://mdbootstrap.com/img/Photos/Others/placeholder-avatar.jpg","alt","example placeholder",1,"rounded-circle",2,"width","100%","height","100%","object-fit","cover"],[1,"d-flex","justify-content-center"],[1,"btn","btn-primary","btn-rounded"],["for","customFile2",1,"form-label","text-white","m-1"],["type","file","id","customFile2","onchange","",1,"form-control","d-none"],[1,"col-lg-8"],[1,"py-1"],[1,"mb-3"],[1,"col"],[1,"form-group"],["type","text","name","CI","formControlName","CI","placeholder","12312313",1,"form-control"],["type","text","name","name","formControlName","Name","placeholder","John Smith","value","John Smith",1,"form-control"],[1,"mb-4"],["type","text","placeholder","user@example.com","formControlName","Email",1,"form-control"],["id","Status","name","Status","formControlName","Status",1,"form-control"],["value",""],["value","1"],["value","2"],[1,"col","mb-3"],["rows","5","placeholder","Observaciones","formControlName","Observation",1,"form-control"],[1,"col-12","col-sm-6","mb-3"],[1,"mb-2"],["type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022","formControlName","Password",1,"form-control"],["type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control"],[1,"d-none","d-xl-inline"],[1,"col-12","col-sm-5","offset-sm-1","mb-3"],[1,"custom-controls-stacked","px-2"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","notifications-blog","checked","",1,"custom-control-input"],["for","notifications-blog",1,"custom-control-label"],["type","checkbox","id","notifications-news","checked","",1,"custom-control-input"],["for","notifications-news",1,"custom-control-label"],["type","checkbox","id","notifications-offers","checked","",1,"custom-control-input"],["for","notifications-offers",1,"custom-control-label"],[1,"col","d-flex","justify-content-end"],[1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger","btn-sl-sm","mr-3",3,"click"],[1,"mr-2"],[1,"fa","fa-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4,"Usuarios"),e.qZA(),e.TgZ(5,"p",3),e._uU(6,"nuevo registro"),e.qZA()()(),e.TgZ(7,"div",4),e.YNc(8,b,4,0,"button",5),e.TgZ(9,"button",6),e.NdJ("click",function(){return n.goBack()}),e._uU(10),e.qZA()()(),e.TgZ(11,"form",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"h4",12),e._uU(17,"Foto"),e.qZA()(),e.TgZ(18,"div",13)(19,"div")(20,"div",14),e._UZ(21,"img",15),e.qZA(),e.TgZ(22,"div",16)(23,"div",17)(24,"label",18),e._uU(25,"Choose file"),e.qZA(),e._UZ(26,"input",19),e.qZA()()()()()(),e.TgZ(27,"div",20)(28,"div",10),e._UZ(29,"div",11),e.TgZ(30,"div",13)(31,"div",21)(32,"h4",22),e._uU(33,"Informacion Personal"),e.qZA(),e.TgZ(34,"div",8)(35,"div",23)(36,"div",8)(37,"div",23)(38,"div",24)(39,"label"),e._uU(40,"CI"),e.qZA(),e._UZ(41,"input",25),e.qZA()(),e.TgZ(42,"div",23)(43,"div",24)(44,"label"),e._uU(45,"Nombre"),e.qZA(),e._UZ(46,"input",26),e.qZA()()(),e._UZ(47,"hr",27),e.TgZ(48,"h4",22),e._uU(49,"Informacion de Usuario"),e.qZA(),e.TgZ(50,"div",8)(51,"div",23)(52,"div",24)(53,"label"),e._uU(54,"Correo"),e.qZA(),e._UZ(55,"input",28),e.qZA()(),e.TgZ(56,"div",23)(57,"label"),e._uU(58,"Estatus"),e.qZA(),e.TgZ(59,"select",29)(60,"option",30),e._uU(61,"Please select"),e.qZA(),e.TgZ(62,"option",31),e._uU(63,"Activo"),e.qZA(),e.TgZ(64,"option",32),e._uU(65,"inactivo"),e.qZA()()()(),e.TgZ(66,"div",8)(67,"div",33)(68,"div",24)(69,"label"),e._uU(70,"Observaciones"),e.qZA(),e._UZ(71,"textarea",34),e.qZA()()()()(),e.TgZ(72,"div",8)(73,"div",35)(74,"div",36)(75,"b"),e._uU(76,"Change Password"),e.qZA()(),e.TgZ(77,"div",8)(78,"div",23)(79,"div",24)(80,"label"),e._uU(81,"Contrase\xf1a Actual"),e.qZA(),e._UZ(82,"input",37),e.qZA()()(),e.TgZ(83,"div",8)(84,"div",23)(85,"div",24)(86,"label"),e._uU(87,"Nueva Contrase\xf1a"),e.qZA(),e._UZ(88,"input",38),e.qZA()(),e.TgZ(89,"div",23)(90,"div",24)(91,"label"),e._uU(92,"Confirmar "),e.TgZ(93,"span",39),e._uU(94," Contrase\xf1a"),e.qZA()(),e._UZ(95,"input",38),e.qZA()()()(),e.TgZ(96,"div",40)(97,"div",36)(98,"b"),e._uU(99,"Permisos"),e.qZA()(),e.TgZ(100,"div",8)(101,"div",23)(102,"label"),e._uU(103,"Acceso a modulos"),e.qZA(),e.TgZ(104,"div",41)(105,"div",42),e._UZ(106,"input",43),e.TgZ(107,"label",44),e._uU(108,"Pagos"),e.qZA()(),e.TgZ(109,"div",42),e._UZ(110,"input",45),e.TgZ(111,"label",46),e._uU(112,"Estudiantes"),e.qZA()(),e.TgZ(113,"div",42),e._UZ(114,"input",47),e.TgZ(115,"label",48),e._uU(116,"Usuarios"),e.qZA()()()()()()(),e.TgZ(117,"div",8)(118,"div",49)(119,"button",50),e.NdJ("click",function(){return n.sendForm()}),e._uU(120,"Save Changes"),e.qZA()()()()()()()()()),2&t&&(e.xp6(8),e.Q6J("ngIf","edit"==n.viewType),e.xp6(2),e.Oqu("salir"),e.xp6(1),e.Q6J("formGroup",n.formUser))},dependencies:[h.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u]}),o})();const C=[{path:"",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-users-list"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"users-list works!"),e.qZA())}}),o})()},{path:"new",component:p},{path:"update/:uuid",component:p}];let T=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(C),d.Bz]}),o})();var w=i(2795);let A=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.ez,w.m,T,r.UX]}),o})()}}]);