"use strict";(self.webpackChunkTerraForm=self.webpackChunkTerraForm||[]).push([[795],{8795:(ce,h,d)=>{d.r(h),d.d(h,{StudentsModule:()=>ue});var m=d(817),u=d(6153),w=d(7964),g=d.n(w),e=d(3333),_=d(8029),S=d(5391),v=d(2306);let A=(()=>{class o{constructor(t,n,a){this._service=t,this.router=n,this.route=a,this.Students=[],this.showLoader=!0,this.metrics={actives:{total:0},girls:{total:0},mens:{total:0},Birthdate:{total:0}}}ngOnInit(){this.getList()}getList(){this.showLoader=!0,this._service.getStudents().subscribe(t=>{this.Students=t,this.showLoader=!1}),this.loadAnalytics()}loadAnalytics(){this.showLoader=!0,this._service.getAnalytics().subscribe(t=>{this.metrics=t,this.showLoader=!1})}deleteStudent(t){g().fire({title:"Cuidado",text:"\xbfDesea eliminar el registro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!",cancelButtonText:"Cancelar"}).then(n=>{this.showLoader=!0,n.isConfirmed?this._service.delStudent({uuid:t.uuid}).subscribe(a=>{this.showLoader=!1,this.getList()}):this.showLoader=!1})}goToAdd(){this.router.navigate(["admin/students/new"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.V),e.Y36(u.F0),e.Y36(u.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-students-list"]],decls:67,vars:7,consts:[[1,"row","page-titles","mx-0"],[1,"col-sm-6","p-md-0"],[1,"welcome-text"],[1,"mb-1"],[1,"col-sm-6","p-md-0","justify-content-sm-end","mt-2","mt-sm-0","d-flex"],["type","button",1,"btn","btn-primary","btn-sl-sm","mr-3",3,"click"],[1,"mr-2"],[1,"fa","fa-plus"],[1,"row"],[1,"col-lg-3","col-sm-6"],[1,"card"],[1,"stat-widget-two","card-body"],[1,"stat-content"],[1,"stat-text"],[1,"stat-digit"],[1,"fa","fa-users"],[1,"progress"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-success","w-100"],[1,"fa","fa-female"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-primary","w-100"],[1,"fa","fa-male"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-warning","w-100"],[1,"fa","fa-birthday-cake"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-danger","w-100"],[1,"col-12"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[2,"width","100%","height","100%"],[3,"rowData","idTable","deleteRow"],[3,"showLoader"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4,"Estudiantes"),e.qZA(),e.TgZ(5,"p",3),e._uU(6,"Estudiantes activos"),e.qZA()()(),e.TgZ(7,"div",4)(8,"button",5),e.NdJ("click",function(){return n.goToAdd()}),e.TgZ(9,"span",6),e._UZ(10,"i",7),e.qZA(),e._uU(11," Nuevo registro"),e.qZA()()(),e.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13),e._uU(18,"Estudiantes Activos"),e.qZA(),e.TgZ(19,"div",14),e._UZ(20,"i",15),e._uU(21),e.qZA()(),e.TgZ(22,"div",16),e._UZ(23,"div",17),e.qZA()()()(),e.TgZ(24,"div",9)(25,"div",10)(26,"div",11)(27,"div",12)(28,"div",13),e._uU(29,"Femeninos"),e.qZA(),e.TgZ(30,"div",14),e._UZ(31,"i",18),e._uU(32),e.qZA()(),e.TgZ(33,"div",16),e._UZ(34,"div",19),e.qZA()()()(),e.TgZ(35,"div",9)(36,"div",10)(37,"div",11)(38,"div",12)(39,"div",13),e._uU(40,"Masculinos"),e.qZA(),e.TgZ(41,"div",14),e._UZ(42,"i",20),e._uU(43),e.qZA()(),e.TgZ(44,"div",16),e._UZ(45,"div",21),e.qZA()()()(),e.TgZ(46,"div",9)(47,"div",10)(48,"div",11)(49,"div",12)(50,"div",13),e._uU(51,"Cumplea\xf1os este mes"),e.qZA(),e.TgZ(52,"div",14),e._UZ(53,"i",22),e._uU(54),e.qZA()(),e.TgZ(55,"div",16),e._UZ(56,"div",23),e.qZA()()()()(),e.TgZ(57,"div",8)(58,"div",24)(59,"div",10)(60,"div",25)(61,"h4",26),e._uU(62,"Lista"),e.qZA()(),e.TgZ(63,"div",27)(64,"div",28)(65,"app-table-terra",29),e.NdJ("deleteRow",function(s){return n.deleteStudent(s)}),e.qZA()()()()()(),e._UZ(66,"app-loader",30)),2&t&&(e.xp6(21),e.Oqu(n.metrics.actives.total),e.xp6(11),e.Oqu(n.metrics.girls.total),e.xp6(11),e.hij(" ",n.metrics.mens.total,""),e.xp6(11),e.Oqu(n.metrics.Birthdate.total),e.xp6(11),e.Q6J("rowData",n.Students)("idTable",1),e.xp6(1),e.Q6J("showLoader",n.showLoader))},dependencies:[S.x,v.R],styles:[".ag-theme-quartz[_ngcontent-%COMP%]{--ag-grid-size: 120px !important;--ag-list-item-height: 100px !important}"]}),o})();var p=d(7036),r=d(8765),f=d(3183),b=d(5556),x=d(770),y=d(8617),U=d(7272),q=d(9235);function I(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleModal())}),e.TgZ(1,"label",4),e._uU(2,"Tomar foto"),e.qZA()()}}function N(o,i){if(1&o&&(e.TgZ(0,"h4")(1,"span"),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(t.errorMessage)}}function M(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.triggerSnapshot())}),e._uU(1,"Capturar Imagen"),e.qZA()}}function L(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h5",9),e._uU(5,"Tomar Foto"),e.qZA(),e.TgZ(6,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleModal())}),e.TgZ(7,"span"),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",11)(10,"webcam",12),e.NdJ("imageCapture",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleImage(a))})("initError",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleInitError(a))}),e.qZA(),e.YNc(11,N,3,1,"h4",13),e.qZA(),e.TgZ(12,"div",14)(13,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleModal())}),e._uU(14,"Cerrar"),e.qZA(),e.YNc(15,M,2,0,"button",16),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(10),e.Q6J("width",450)("trigger",t.triggerObservable),e.xp6(1),e.Q6J("ngIf",t.errorDevice),e.xp6(4),e.Q6J("ngIf",!t.errorDevice)}}function J(o,i){1&o&&e._UZ(0,"div",18)}let F=(()=>{class o{constructor(){this.imgReady=new e.vpe,this.showModal=!1,this.trigger=new q.x,this.webcamImage=null,this.errorMessage="",this.errorDevice=!1,navigator.mediaDevices.getUserMedia({video:!0}).then(t=>{}).catch(t=>{console.error("Error al obtener permisos:",t),this.errorDevice=!0})}ngOnInit(){}toggleModal(){this.showModal=!this.showModal}get triggerObservable(){return this.trigger.asObservable()}triggerSnapshot(){this.trigger.next()}handleImage(t){console.log(t),this.webcamImage=t,this.imgReady.emit(t),this.toggleModal()}handleInitError(t){if(t.mediaStreamError&&"NotAllowedError"===t.mediaStreamError.name){alert("Error al acceder a la camara acceso denegado"),this.errorMessage=" Error al acceder a la camara",this.errorDevice=!0;try{navigator.mediaDevices.getUserMedia({video:!0})}catch(n){console.error("Error al solicitar permisos de la c\xe1mara:",n)}}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-webcam-modal"]],outputs:{imgReady:"imgReady"},decls:3,vars:3,consts:[["class","btn btn-primary btn-rounded",3,"click",4,"ngIf"],["class","modal fade show","id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true","style","padding-right: 15px; display: block;",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],[1,"btn","btn-primary","btn-rounded",3,"click"],[1,"form-label","text-white","m-1"],["id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","show",2,"padding-right","15px","display","block"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"click"],[1,"modal-body"],[1,"rounded-circle",3,"width","trigger","imageCapture","initError"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"modal-backdrop","fade","show"]],template:function(t,n){1&t&&(e.YNc(0,I,3,0,"div",0),e.YNc(1,L,16,4,"div",1),e.YNc(2,J,1,0,"div",2)),2&t&&(e.Q6J("ngIf",!n.errorDevice),e.xp6(1),e.Q6J("ngIf",n.showModal),e.xp6(1),e.Q6J("ngIf",n.showModal))},dependencies:[m.O5,f.i3]}),o})();var Z=d(824);const D=["capture"];function R(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",67),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteStudent())}),e.TgZ(1,"span",68),e._UZ(2,"i",69),e.qZA(),e._uU(3," Eliminar"),e.qZA()}}function k(o,i){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Jzz("text-align: center; ",3==t.Status?"background-color: #7ED321;":2==t.Status?"background-color: #d32121;":"background-color: #f2f2f2;",""),e.xp6(1),e.hij(" ",t.Amount,"")}}function B(o,i){if(1&o&&(e.TgZ(0,"div",10)(1,"div",11)(2,"h4",12),e._uU(3,"Relacion de Pagos Mensuales"),e.qZA()(),e.TgZ(4,"div",70)(5,"table",71)(6,"thead",72)(7,"tr")(8,"th",73),e._uU(9,"Ene"),e.qZA(),e.TgZ(10,"th",73),e._uU(11,"Feb"),e.qZA(),e.TgZ(12,"th",73),e._uU(13,"Mar"),e.qZA(),e.TgZ(14,"th",73),e._uU(15,"Abr"),e.qZA(),e.TgZ(16,"th",73),e._uU(17,"May"),e.qZA(),e.TgZ(18,"th",73),e._uU(19,"Jun"),e.qZA(),e.TgZ(20,"th",73),e._uU(21,"Jul"),e.qZA(),e.TgZ(22,"th",73),e._uU(23,"Ago"),e.qZA(),e.TgZ(24,"th",73),e._uU(25,"Sep"),e.qZA(),e.TgZ(26,"th",73),e._uU(27,"Oct"),e.qZA(),e.TgZ(28,"th",73),e._uU(29,"Nov"),e.qZA(),e.TgZ(30,"th",73),e._uU(31,"Dic"),e.qZA()()(),e.TgZ(32,"tbody")(33,"tr"),e.YNc(34,k,2,4,"td",74),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(34),e.Q6J("ngForOf",t.months)}}function Q(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleModal())}),e.TgZ(1,"span",68),e._UZ(2,"i",80),e.qZA(),e._uU(3," Inscribir curso"),e.qZA()}}function O(o,i){1&o&&(e.TgZ(0,"td")(1,"span",82),e._uU(2,"Activo"),e.qZA()())}function P(o,i){1&o&&(e.TgZ(0,"td")(1,"span",83),e._uU(2,"Inactivo"),e.qZA()())}function Y(o,i){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span"),e._uU(7),e.qZA()(),e.YNc(8,O,3,0,"td",81),e.YNc(9,P,3,0,"td",81),e.qZA()),2&o){const t=i.$implicit,n=i.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.Name),e.xp6(3),e.Oqu(t.Amount),e.xp6(1),e.Q6J("ngIf",1==t.Status),e.xp6(1),e.Q6J("ngIf",2==t.Status)}}function E(o,i){if(1&o&&(e.TgZ(0,"div",10)(1,"div",75)(2,"h4",12),e._uU(3,"Cursos Inscritos"),e.qZA(),e.YNc(4,Q,4,0,"button",76),e.qZA(),e.TgZ(5,"div",13)(6,"div",77)(7,"table",78)(8,"thead")(9,"tr")(10,"th"),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Nombre"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Costo"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Estatus"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,Y,10,5,"tr",79),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf","edit"==t.viewType),e.xp6(15),e.Q6J("ngForOf",t.levelsByStudent)}}function G(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.gotoPayment())}),e.TgZ(1,"span",68),e._UZ(2,"i",87),e.qZA(),e._uU(3," Registar pago"),e.qZA()}}function H(o,i){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",97),e.qZA())}function V(o,i){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",87),e.qZA())}function j(o,i){1&o&&(e.TgZ(0,"h4",98),e._uU(1,"Mensualidad"),e.qZA())}function W(o,i){1&o&&(e.TgZ(0,"h4",99),e._uU(1,"Otros pagos"),e.qZA())}function K(o,i){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.Name)}}function z(o,i){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.Description)}}function $(o,i){1&o&&(e.TgZ(0,"span",83),e._uU(1,"Pendiente"),e.qZA())}function X(o,i){1&o&&(e.TgZ(0,"span",100),e._uU(1,"Abonado"),e.qZA())}function ee(o,i){1&o&&(e.TgZ(0,"span",82),e._uU(1,"completado"),e.qZA())}function te(o,i){if(1&o&&(e.TgZ(0,"div",88)(1,"div",89),e.YNc(2,H,2,0,"span",81),e.YNc(3,V,2,0,"span",81),e.qZA(),e.TgZ(4,"div",90),e.YNc(5,j,2,0,"h4",91),e.YNc(6,W,2,0,"h4",92),e.YNc(7,K,2,1,"p",81),e.YNc(8,z,2,1,"p",81),e.TgZ(9,"p",93),e._uU(10),e.qZA(),e.YNc(11,$,2,0,"span",94),e.YNc(12,X,2,0,"span",95),e.YNc(13,ee,2,0,"span",96),e.qZA()()),2&o){const t=i.$implicit;e.xp6(2),e.Q6J("ngIf",1==t.PaymentType),e.xp6(1),e.Q6J("ngIf",2==t.PaymentType),e.xp6(2),e.Q6J("ngIf",1==t.PaymentType),e.xp6(1),e.Q6J("ngIf",2==t.PaymentType),e.xp6(1),e.Q6J("ngIf",1==t.PaymentType),e.xp6(1),e.Q6J("ngIf",2==t.PaymentType),e.xp6(2),e.Oqu(t.PaymentDate),e.xp6(1),e.Q6J("ngIf",1==t.Status),e.xp6(1),e.Q6J("ngIf",2==t.Status),e.xp6(1),e.Q6J("ngIf",3==t.Status)}}function oe(o,i){if(1&o&&(e.TgZ(0,"div",10)(1,"div",75)(2,"h4",12),e._uU(3,"Pagos Realizados"),e.qZA(),e.YNc(4,G,4,0,"button",76),e.qZA(),e.TgZ(5,"div",84)(6,"div",85),e.YNc(7,te,14,10,"div",86),e.qZA()()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf","edit"==t.viewType),e.xp6(3),e.Q6J("ngForOf",t.paymentsByStudents)}}function ne(o,i){if(1&o&&(e.TgZ(0,"option",115),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.UUID),e.xp6(1),e.Oqu(t.Name)}}function ae(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.registreLevel())}),e._uU(1,"Registrar"),e.qZA()}}function ie(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",101)(1,"div",102)(2,"div",103)(3,"div",104)(4,"h5",105),e._uU(5,"Inscribir Curso"),e.qZA(),e.TgZ(6,"button",106),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleModal())}),e.TgZ(7,"span"),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",107)(10,"form",7)(11,"div",31)(12,"label",108),e._uU(13,"Curso"),e.qZA(),e.TgZ(14,"select",109),e.NdJ("change",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.selectLevel(a))}),e.TgZ(15,"option",110),e._uU(16,"Elegir..."),e.qZA(),e.YNc(17,ne,2,2,"option",111),e.qZA()()()(),e.TgZ(18,"div",112)(19,"button",113),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleModal())}),e._uU(20,"Cerrar"),e.qZA(),e.YNc(21,ae,2,0,"button",114),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(10),e.Q6J("formGroup",t.formLevel),e.xp6(7),e.Q6J("ngForOf",t.levelSelect),e.xp6(4),e.Q6J("ngIf",!t.errorDevice)}}function re(o,i){1&o&&e._UZ(0,"div",116)}let T=(()=>{class o{constructor(t,n,a,s,c,l){this._service=t,this.__levelServ=n,this.router=a,this.route=s,this.alert=c,this.auth=l,this.formHasBeenSave=!1,this.hasnewimage=!1,this.showLoader=!0,this.disableForm=!1,this.uuid=null,this.viewType="add",this.btnlabel="Agregar",this.base64Data="",this.levelsByStudent=[],this.paymentsByStudents=[],this.selectedFile=null,this.imagePreview="https://mdbootstrap.com/img/Photos/Others/placeholder-avatar.jpg",this.months=[{IdMonth:1,Amount:"",Status:1},{IdMonth:2,Amount:"",Status:1},{IdMonth:3,Amount:"",Status:1},{IdMonth:4,Amount:"",Status:1},{IdMonth:5,Amount:"",Status:1},{IdMonth:6,Amount:"",Status:1},{IdMonth:7,Amount:"",Status:1},{IdMonth:8,Amount:"",Status:1},{IdMonth:9,Amount:"",Status:1},{IdMonth:10,Amount:"",Status:1},{IdMonth:11,Amount:"",Status:1},{IdMonth:12,Amount:"",Status:1}],this.levelSelect=[],this.LevelSelectAux=[],this.selecteLevelUUID=null,this.showModal=!1,this.createForm(),this.subscribeChangeForm()}ngOnInit(){console.log(window.location.origin),this.showLoader=!0,this.route.params.subscribe(t=>{this.uuid=t.uuid,void 0!==this.uuid?(this.showLoader=!1,this.viewType="edit",this.loadStudent(),this.btnlabel="Guardar",this.qrData=b.N.verification+this.auth.getUser().company+"/"+this.uuid):this.showLoader=!1,this.loadSelects()})}ngOnDestroy(){}subscribeChangeForm(){this.formStudent.valueChanges.subscribe(t=>{this.formStudent.pristine||(this.formHasBeenSave=!1)})}loadStudent(){this.showLoader=!0,this._service.getStudentsByUuid(this.uuid).subscribe(t=>{console.log(t);let n=t;this.setFormStudent(n.student),this.levelsByStudent=n.levels,this.paymentsByStudents=n.payments,this.checkMonthPayment(),this.showLoader=!1})}loadSelects(){this.showLoader=!0,this._service.getResources().subscribe(t=>{console.log(t),this.LevelSelectAux=t,this.filterLevelsRegistred(),this.showLoader=!1})}filterLevelsRegistred(){this.levelSelect=this.LevelSelectAux.filter(t=>!this.levelsByStudent.some(n=>n.UUID===t.UUID))}selectLevel(t){this.selecteLevelUUID=t.target.value}registreLevel(){this.showLoader=!0,this.__levelServ.registrationStudent({student:this.uuid,level:this.selecteLevelUUID,getLevelsByStudents:!0}).subscribe(t=>{this.alert.success("Inscripcion","la inscripcion fue exitosa"),this.levelsByStudent=t,this.filterLevelsRegistred(),this.toggleModal(),this.showLoader=!1})}setFormStudent(t){this.formStudent.get("Name").patchValue(t.Name),this.formStudent.get("CI").patchValue(t.CI),this.formStudent.get("Birthdate").patchValue(t.Birthdate),this.formStudent.get("LegalRepresentative").patchValue(t.LegalRepresentative),this.formStudent.get("PhoneNumber").patchValue(t.PhoneNumber),this.formStudent.get("PhoneNumberLegalRepresentative").patchValue(t.PhoneNumberLegalRepresentative),this.formStudent.get("Image").patchValue(t.Image),""!=t.Image&&(this.imagePreview=b.N.routerImg+t.Image),this.formStudent.get("Direction").patchValue(t.Direction),this.formStudent.get("Observation").patchValue(t.Observation),this.formStudent.get("Gender").patchValue(t.Gender),this.formStudent.get("Company").patchValue(t.Company),this.formStudent.get("Status").patchValue(t.Status),this.formStudent.get("UUID").patchValue(t.UUID)}createForm(){this.formStudent=new r.cw({Name:new r.NI("",[r.kI.required]),CI:new r.NI(""),Birthdate:new r.NI("",[r.kI.required]),LegalRepresentative:new r.NI(""),PhoneNumber:new r.NI(""),PhoneNumberLegalRepresentative:new r.NI(""),Image:new r.NI(""),Direction:new r.NI(""),Observation:new r.NI(""),Gender:new r.NI("",[r.kI.required]),Company:new r.NI(""),Status:new r.NI(1),UUID:new r.NI(""),base64Data:new r.NI(null)}),this.formLevel=new r.cw({UUID:new r.NI("")})}sendForm(){var t=this;return(0,p.Z)(function*(){if(t.formHasBeenSave=!0,t.disableForm=!0,t.formStudent.valid){t.showLoader=!0;let n=t.formStudent.value;"add"==t.viewType?t._service.addStudent({student:n,hasnewimage:t.hasnewimage}).subscribe(function(){var a=(0,p.Z)(function*(s){t.alert.success("Registro Creado","Se ha creado el registro"),t.showLoader=!1,t.goBack()});return function(s){return a.apply(this,arguments)}}(),a=>{console.log(a),t.disableForm=!1,t.showLoader=!1}):(t.alert.success("Registro Actualizado","Se ha actualizado el registro"),t._service.updStudent({student:n,hasnewimage:t.hasnewimage}).subscribe(function(){var a=(0,p.Z)(function*(s){console.log(s),t.showLoader=!1});return function(s){return a.apply(this,arguments)}}(),a=>{console.log(a),t.disableForm=!1,t.showLoader=!1}))}else t.showLoader=!1,t.alert.warning("Campos invalidos","Verifique los campos marcados")})()}deleteStudent(){g().fire({title:"Cuidado",text:"\xbfDesea eliminar el registro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!",cancelButtonText:"Cancelar"}).then(t=>{console.log(t),t.isConfirmed&&this._service.delStudent({uuid:this.uuid}).subscribe(n=>{this.goBack()})})}goBack(){(this.formStudent.dirty||this.hasnewimage)&&!this.formHasBeenSave&&g().fire({title:"Cambios sin guardar",text:"Algunos cambios no fueron guardados, \xbfDeseas Guardarlos?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Guardar!",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&this.sendForm()}),this.router.navigate(["admin/students"])}gotoPayment(){(this.formStudent.dirty||this.hasnewimage)&&!this.formHasBeenSave&&g().fire({title:"Cambios sin guardar",text:"Algunos cambios no fueron guardados, \xbfDeseas Guardarlos?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Guardar!",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&this.sendForm()}),this.router.navigate(["admin/payments/new"])}onFileSelected(t){if(console.log(t),t instanceof f.T8)this.imagePreview=t.imageAsDataUrl,this.base64Data=t.imageAsDataUrl,this.formStudent.get("base64Data").patchValue(this.base64Data);else{this.selectedFile=t.target.files[0];const n=new FileReader;n.onload=a=>{this.base64Data=n.result,this.imagePreview=n.result,this.formStudent.get("base64Data").patchValue(this.base64Data)},n.readAsDataURL(this.selectedFile)}this.hasnewimage=!0}validatorOfInput(t){let s,n=this.formStudent.get(t);if(!(n.touched&&n.invalid||this.formHasBeenSave&&n.invalid))return"";if(n.errors.required)return s="Campo Requerido.",s;if(n.errors.pattern)return s="El formato no es valido",s;if(n.errors.minlength)return s=`Debe contener al menos ${n.errors.minlength.requiredLength} caracteres`,s;if(n.errors.maxlength){let l=n.value.substring(0,n.value.length-1);n.patchValue(l)}}toggleModal(){this.showModal=!this.showModal}checkMonthPayment(){let t=this.paymentsByStudents.filter(n=>1==n.PaymentType);this.months.forEach(n=>{const a=t.find(s=>s.IdMonth==n.IdMonth);a&&(n.Amount=a.Amount,n.Status=a.Status)})}shareQR(){console.log("llego"),console.log(this.capture),html2canvas(this.capture.nativeElement).then(t=>{if(console.log("html2canvas"),this.capturedImage=t.toDataURL(),console.log("capturedImage"),console.log("canvas.toDataURL() --\x3e"+this.capturedImage),navigator.share){let n=this.dataURLtoFile(this.capturedImage,"QrTerraForm.jpg");navigator.share({title:"Awesome Content",text:"Check out this awesome content!",url:"https://example.com",files:[n]}).then(()=>console.log("Shared successfully")).catch(a=>console.error("Sharing failed:",a))}})}dataURLtoFile(t,n){for(var a=t.split(","),s=a[0].match(/:(.*?);/)[1],c=atob(a[a.length-1]),l=c.length,C=new Uint8Array(l);l--;)C[l]=c.charCodeAt(l);return new File([C],n,{type:s})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.V),e.Y36(x.r),e.Y36(u.F0),e.Y36(u.gz),e.Y36(y.c),e.Y36(U.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-students-crud"]],viewQuery:function(t,n){if(1&t&&e.Gf(D,7),2&t){let a;e.iGM(a=e.CRH())&&(n.capture=a.first)}},decls:146,vars:29,consts:[[1,"row","page-titles","mx-0"],[1,"col-sm-6","p-md-0"],[1,"welcome-text"],[1,"mb-1"],[1,"col-sm-6","p-md-0","justify-content-sm-end","mt-2","mt-sm-0","d-flex"],["class","btn btn-danger btn-sl-sm mr-3","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],[1,"form-valide",3,"formGroup"],[1,"row"],[1,"col-lg-8"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"form-validation"],[1,"col-sm-12","col-lg-6","col-md-6"],[1,"form-group"],["for","Name"],[1,"text-danger"],["type","text","id","Name","name","Name","formControlName","Name","placeholder","Ingresa Nombre",1,"form-control"],[1,"invalid-feedback"],["for","CI"],["type","text","id","CI","name","CI","formControlName","CI","placeholder","CI..",1,"form-control"],["for","Birthdate"],["type","date","id","Birthdate","name","Birthdate","placeholder"," dd/mm/yyyy","formControlName","Birthdate",1,"form-control"],["for","Gender"],["id","Gender","name","Gender","formControlName","Gender",1,"form-control"],["value",""],["value","Masculino"],["value","Femenino"],[1,"mb-4"],[1,"mb-3"],[1,"col"],["for","PhoneNumber"],["type","text","id","PhoneNumber","name","PhoneNumber","formControlName","PhoneNumber","placeholder","..telefono!",1,"form-control"],["for","LegalRepresentative"],["type","LegalRepresentative","id","LegalRepresentative","name","LegalRepresentative","formControlName","LegalRepresentative","placeholder","Representante.",1,"form-control"],["for","PhoneNumberLegalRepresentative"],["type","PhoneNumberLegalRepresentative","id","PhoneNumberLegalRepresentative","name","PhoneNumberLegalRepresentative","formControlName","PhoneNumberLegalRepresentative","placeholder"," Telefono Representante.",1,"form-control"],["for","Direction"],["type","text","id","Direction","name","Direction","placeholder"," calle casa etc","formControlName","Direction",1,"form-control"],[1,"col-sm-12","col-lg-12","col-md-12mb-3"],["rows","5","placeholder","Observaciones","formControlName","Observation",1,"form-control"],["for","Status"],["id","Status","name","Status","formControlName","Status",1,"form-control"],["value","1"],["value","2"],[1,"form-group","row"],[1,"col","d-flex","justify-content-end"],["type","button",1,"btn","btn-primary",3,"click"],["class","card",4,"ngIf"],[1,"col-lg-4"],[1,"d-flex","justify-content-center","mb-4"],["id","selectedAvatar","alt","example placeholder",1,"rounded-circle",2,"width","20vw","height","20vw","min-width","200px","min-height","200px","object-fit","cover",3,"src"],[1,"d-flex","justify-content-center"],[1,"btn","btn-primary","btn-rounded"],["for","customFile2",1,"form-label","text-white","m-1"],["type","file","id","customFile2",1,"form-control","d-none",3,"change"],[3,"imgReady"],[1,"card",3,"hidden"],[1,"qrcodeImage","d-flex","justify-content-center"],["capture",""],[3,"qrdata","allowEmptyString","ariaLabel","colorDark","colorLight","elementType","errorCorrectionLevel","imageSrc","imageHeight","imageWidth","margin","scale","title","width"],["type","button",1,"btn","btn-primary","btn-sl-sm","mr-3",3,"click"],["class","modal fade show","id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true","style","padding-right: 15px; display: block;",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],[3,"showLoader"],["type","button",1,"btn","btn-danger","btn-sl-sm","mr-3",3,"click"],[1,"mr-2"],[1,"fa","fa-trash"],[1,"card-body",2,"overflow","scroll"],[1,"table","table-striped","table-hover"],[1,"thead-dark"],[2,"text-align","center"],[3,"style",4,"ngFor","ngForOf"],[1,"card-header","justify-content-center"],["class","btn btn-primary btn-sl-sm mr-3","type","button",3,"click",4,"ngIf"],[1,"table-responsive"],[1,"table","mb-0"],[4,"ngFor","ngForOf"],[1,"fa","fa-check"],[4,"ngIf"],[1,"badge","badge-success"],[1,"badge","badge-warning"],[1,"card-body",2,"max-height","55vh","overflow-x","scroll"],[1,"recent-comment","m-t-15"],["class","media",4,"ngFor","ngForOf"],[1,"fa","fa-money"],[1,"media"],[1,"media-left"],[1,"media-body"],["class","media-heading text-primary",4,"ngIf"],["class","media-heading text-success",4,"ngIf"],[1,"comment-date"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[1,"fa","fa-calendar"],[1,"media-heading","text-primary"],[1,"media-heading","text-success"],[1,"badge","badge-danger"],["id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","show",2,"padding-right","15px","display","block"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"click"],[1,"modal-body"],["for","Student"],["id","Student","required","","formControlName","UUID",1,"custom-select","d-block","w-100",3,"change"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[3,"value"],[1,"modal-backdrop","fade","show"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4,"Estudiantes"),e.qZA(),e.TgZ(5,"p",3),e._uU(6,"nuevo registro"),e.qZA()()(),e.TgZ(7,"div",4),e.YNc(8,R,4,0,"button",5),e.TgZ(9,"button",6),e.NdJ("click",function(){return n.goBack()}),e._uU(10),e.qZA()()(),e.TgZ(11,"form",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"h4",12),e._uU(17,"Informacion Personal"),e.qZA()(),e.TgZ(18,"div",13)(19,"div",14)(20,"div",8)(21,"div",15)(22,"div",16)(23,"label",17),e._uU(24,"Nombre "),e.TgZ(25,"span",18),e._uU(26,"*"),e.qZA()(),e._UZ(27,"input",19),e.TgZ(28,"div",20),e._uU(29),e.qZA()()(),e.TgZ(30,"div",15)(31,"div",16)(32,"label",21),e._uU(33,"CI "),e.qZA(),e._UZ(34,"input",22),e.qZA()()(),e.TgZ(35,"div",8)(36,"div",15)(37,"div",16)(38,"label",23),e._uU(39,"Fecha de Nacimiento "),e.TgZ(40,"span",18),e._uU(41,"*"),e.qZA()(),e._UZ(42,"input",24),e.TgZ(43,"div",20),e._uU(44),e.qZA()()(),e.TgZ(45,"div",15)(46,"div",16)(47,"label",25),e._uU(48,"Genero "),e.TgZ(49,"span",18),e._uU(50,"*"),e.qZA()(),e.TgZ(51,"select",26)(52,"option",27),e._uU(53,"Please select"),e.qZA(),e.TgZ(54,"option",28),e._uU(55,"Masculino"),e.qZA(),e.TgZ(56,"option",29),e._uU(57,"Femenino"),e.qZA()(),e.TgZ(58,"div",20),e._uU(59),e.qZA()()()(),e._UZ(60,"hr",30),e.TgZ(61,"h4",31),e._uU(62,"Informacion de Contacto"),e.qZA(),e.TgZ(63,"div",8)(64,"div",32)(65,"div",16)(66,"label",33),e._uU(67,"Telefono "),e.qZA(),e._UZ(68,"input",34),e.qZA()()(),e._UZ(69,"hr",30),e.TgZ(70,"h4",31),e._uU(71,"Informacion de Representante"),e.qZA(),e.TgZ(72,"div",8)(73,"div",15)(74,"div",16)(75,"label",35),e._uU(76,"Representante Legal "),e.qZA(),e._UZ(77,"input",36),e.qZA()(),e.TgZ(78,"div",15)(79,"div",16)(80,"label",37),e._uU(81,"Telefono Representante Legal "),e.qZA(),e._UZ(82,"input",38),e.qZA()()(),e._UZ(83,"hr",30),e.TgZ(84,"h4",31),e._uU(85,"Otros Datos"),e.qZA(),e.TgZ(86,"div",8)(87,"div",32)(88,"div",16)(89,"label",39),e._uU(90,"Direci\xf3n "),e.qZA(),e._UZ(91,"input",40),e.qZA()()(),e.TgZ(92,"div",8)(93,"div",41)(94,"div",16)(95,"label"),e._uU(96,"Observaciones"),e.qZA(),e._UZ(97,"textarea",42),e.qZA()()(),e.TgZ(98,"div",8)(99,"div",32)(100,"div",16)(101,"label",43),e._uU(102,"Estado "),e.TgZ(103,"span",18),e._uU(104,"*"),e.qZA()(),e.TgZ(105,"select",44)(106,"option",27),e._uU(107,"Please select"),e.qZA(),e.TgZ(108,"option",45),e._uU(109,"Activo"),e.qZA(),e.TgZ(110,"option",46),e._uU(111,"inactivo"),e.qZA()()()()(),e.TgZ(112,"div",47)(113,"div",48)(114,"button",49),e.NdJ("click",function(){return n.sendForm()}),e._uU(115),e.qZA()()()()()(),e.YNc(116,B,35,1,"div",50),e.qZA(),e.TgZ(117,"div",51)(118,"div",10)(119,"div",11)(120,"h4",12),e._uU(121,"Foto"),e.qZA()(),e.TgZ(122,"div",13)(123,"div")(124,"div",52),e._UZ(125,"img",53),e.qZA(),e.TgZ(126,"div",54)(127,"div",55)(128,"label",56),e._uU(129,"cargar archivo"),e.qZA(),e.TgZ(130,"input",57),e.NdJ("change",function(s){return n.onFileSelected(s)}),e.qZA()(),e.TgZ(131,"app-webcam-modal",58),e.NdJ("imgReady",function(s){return n.onFileSelected(s)}),e.qZA()()()()(),e.YNc(132,E,20,2,"div",50),e.YNc(133,oe,8,2,"div",50),e.TgZ(134,"div",59)(135,"div",11),e._uU(136," QR Informacion "),e.qZA(),e.TgZ(137,"div",13)(138,"div",60,61),e._UZ(140,"qrcode",62),e.qZA(),e.TgZ(141,"button",63),e.NdJ("click",function(){return n.shareQR()}),e._uU(142,"compartir"),e.qZA()()()()()(),e.YNc(143,ie,22,3,"div",64),e.YNc(144,re,1,0,"div",65),e._UZ(145,"app-loader",66)),2&t&&(e.xp6(8),e.Q6J("ngIf","edit"==n.viewType),e.xp6(2),e.Oqu("salir"),e.xp6(1),e.Q6J("formGroup",n.formStudent),e.xp6(18),e.hij(" ",n.validatorOfInput("Name")," "),e.xp6(15),e.hij(" ",n.validatorOfInput("Birthdate")," "),e.xp6(15),e.hij(" ",n.validatorOfInput("Gender")," "),e.xp6(56),e.Oqu(n.btnlabel),e.xp6(1),e.Q6J("ngIf","add"!=n.viewType),e.xp6(9),e.Q6J("src",n.imagePreview,e.LSH),e.xp6(7),e.Q6J("ngIf","add"!=n.viewType),e.xp6(1),e.Q6J("ngIf","add"!=n.viewType),e.xp6(1),e.Q6J("hidden",!n.qrData),e.xp6(6),e.Q6J("qrdata",n.qrData)("allowEmptyString",!0)("ariaLabel","QR Code image with the following content...")("colorDark","#3f51b5")("colorLight","#000000")("elementType","canvas")("errorCorrectionLevel","M")("imageSrc","assets/images/logo cuadrado.png")("imageHeight",90)("imageWidth",90)("margin",4)("scale",1)("title",n.qrData)("width",300),e.xp6(3),e.Q6J("ngIf",n.showModal),e.xp6(1),e.Q6J("ngIf",n.showModal),e.xp6(1),e.Q6J("showLoader",n.showLoader))},dependencies:[m.sg,m.O5,v.R,F,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.Q7,r.sg,r.u,Z.V]}),o})();const se=[{path:"",component:A},{path:"new",component:T},{path:"update/:uuid",component:T}];let de=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(se),u.Bz]}),o})();var le=d(2795);let ue=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,le.m,de,r.UX,Z.N]}),o})()}}]);